:description: This section describes the neo4j-browser internals, including its architecture and components


[[internals]]
= Neo4J Browser Internals

The Neo4J Browser is logically composed of 2 parts:

1. A slightly coupled graphing module
2. A user-interface that combines the graph rendering (supported by the graphing module), database, and user
   interaction together

The graphing is based on D3 but pretty much developed from scratch by building everything on top of D3 and implementing
its own layout, coloring, and link drawing. For example, the calculation of arrow (e.g. node links) between nodes
uses some very complicated math along with very prelimiary MDN standard basic shap specification.

[WARNING]
====
We will not have any TypeDoc documentation, because the TypeScript version used in Neo4J Browser is not supprted by it
====

== Component Diagram (WIP)

image:neo4j-browser.png[width=300]

* Sentry.io is initialized in the top index.tsx
* AppInit.tsx is responsible for several initializations:
+
--
** Redux
** Suber: The reason suber is used is sharing states between Neo4J database data and React components is not supported
   by Redux. As its doc (https://github.com/oskarhane/suber#in-combination-with-redux) points out, Redux is for two-way
   communications between components. Suber is for one-way comm. between component and DB.
** Apollo GraphQL Client
** Drag & Drop Plugin
--
+
The initialization assumes provider pattern around regular App component:
[source,typescript]
----
<Provider store={store as any}>
  <BusProvider bus={bus}>
    <ApolloProvider client={client}>
      <DndProvider backend={HTML5Backend}>
        <App />
      </DndProvider>
    </ApolloProvider>
  </BusProvider>
</Provider>
----

* Neo4J Browser styling is implemented via https://styled-components.com/[styled-components] and is initialized in App.tsx
